(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(f.length)f.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],r=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var r={},a={app:0},n=[];function i(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=r,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("a949")},"034f":function(e,t,s){"use strict";var r=s("85ec"),a=s.n(r);a.a},"04dc":function(e,t,s){},"35c8":function(e,t,s){"use strict";var r=s("5e24"),a=s.n(r);a.a},"37f2":function(e,t,s){"use strict";var r=s("858d"),a=s.n(r);a.a},"42fc":function(e,t,s){"use strict";var r=s("5675"),a=s.n(r);a.a},4424:function(e,t,s){"use strict";var r=s("04dc"),a=s.n(r);a.a},4678:function(e,t,s){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id="4678"},5675:function(e,t,s){},"5e24":function(e,t,s){},"76c3":function(e,t,s){"use strict";var r=s("e067"),a=s.n(r);a.a},"858d":function(e,t,s){},"85ec":function(e,t,s){},a949:function(e,t,s){"use strict";s.r(t);s("96cf");var r=s("1da1"),a=s("77ec"),n=(s("b0c0"),s("2b0e")),i=s("ce5b"),o=s.n(i),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("v-app",{attrs:{id:"app-content"}},[e.auth?s("div",{attrs:{id:"nav"}},[s("LeftSideNav",{attrs:{currentUser:e.user,links:e.links,auth:e.auth,isAuthorized:e.isAuthorized}})],1):e._e(),s("v-content",{attrs:{id:"main-content"}},[s("router-view",{attrs:{isAuthorized:e.isAuthorized,currentUser:e.user}})],1),s("v-footer",{attrs:{app:""}},[s("span",[e._v("Â© 2019")])])],1)],1)},l=[],u=(s("ac1f"),s("1276"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[s("ul",[e._l(e.links,(function(t,r){return t.isAdmin?e._e():s("v-list-item",{key:"path-"+r,staticClass:"list-item",on:{click:function(s){return e.goToPage(t.path)}}},[s("v-icon",{class:[t.icon]},[e._v(e._s(t.icon))]),e._v(" "+e._s(t.name)+" ")],1)})),e._l(e.links,(function(t,r){return t.isAdmin&&e.currentUser.is_admin?s("v-list-item",{key:"path-"+r,staticClass:"list-item",on:{click:function(s){return e.goToPage(t.path)}}},[s("v-icon",{class:[t.icon]},[e._v(e._s(t.icon))]),e._v(" "+e._s(t.name)+" ")],1):e._e()}))],2)]),s("v-app-bar",{attrs:{app:"","clipped-left":""}},[s("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),s("v-toolbar-title",[e._v(" "+e._s(e.currentPageTitle)+" Dashboard ")]),s("v-spacer"),s("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[s("v-btn",e._g({attrs:{icon:""}},r),[s("v-icon",[e._v("mdi-account")])],1)]}}])},[s("v-list",e._l(e.userActions,(function(t){return t.auth===e.auth?s("v-list-item",{key:t.name,on:{click:function(s){return e.goToPage(t.path,t.name)}}},[s("v-list-item-title",[e._v(e._s(t.name))])],1):e._e()})),1)],1)],1)],1)}),d=[];s("d3b7");function f(e,t){return e.post("http://localhost:8080/api/v1/admin/register",t).then((function(e){return console.log("response",e),Promise.resolve(e)})).catch((function(e){return e.response}))}function m(e,t){return e.post("http://localhost:8080/api/v1/admin/sign-in",t).then((function(e){var t=e.data.token;return t&&localStorage.setItem("user-token",t),Promise.reject(e)})).catch((function(e){return e&&e.response?(localStorage.removeItem("user-token"),e.response):e}))}function h(e){var t={token:{tokenKey:localStorage.getItem("user-token")}};return e.post("http://localhost:8080/api/v1/admin/sign-out",t).then((function(){localStorage.removeItem("user-token")})).catch((function(e){return e.response?e.response:e}))}var p={register:f,signIn:m,signOut:h},v=p,b=s("bc3a"),g={vuetify:new o.a({theme:{dark:!0}}),data:function(){return{drawer:null,model:1,userActions:[{name:"sign in",path:"/sign-in",auth:!1},{name:"sign up",path:"/sign-up",auth:!1},{name:"sign out",path:"/sign-out",auth:!0}]}},props:{currentUser:Object,source:String,links:Array,currentPageTitle:String,auth:Boolean,isAuthorized:Function},methods:{checkAuth:function(){this.isAuthorized()||this.$router.push("/sign-in")},goToPage:function(e,t){"sign out"===t?this.signOut():(this.drawer=!this.drawer,this.$router.push(e))},signOut:function(){var e=this;v.signOut(b).then((function(){e.checkAuth()}))}},components:{}},j=g,k=(s("42fc"),s("2877")),y=Object(k["a"])(j,u,d,!1,null,"053a157e",null),w=y.exports,x={name:"Home",data:function(){return{token:null,user:null,role:null,auth:!1,pageTitle:"",links:[{name:"Dashboard",path:"/",icon:"mdi-view-dashboard",isAdmin:!1},{name:"Users",path:"/users",icon:"mdi-view-dashboard",isAdmin:!0},{name:"Data transfer",path:"/data-transfer",icon:"mdi-view-dashboard",isAdmin:!0}]}},created:function(){},mounted:function(){this.isAuthorized()||"sign-in"===this.$route.name?this.receiveCurrentUserData():this.$router.push("/sign-up")},updated:function(){this.isAuthorized()},vuetify:new o.a({theme:{dark:!0}}),methods:{isAuthorized:function(){return this.token=localStorage.getItem("user-token"),this.token?(this.auth=!0,!0):(this.auth=!1,!1)},receiveCurrentUserData:function(){var e=this.token;if(e){var t=e.split(".")[1],s=JSON.parse(window.atob(t));this.user=s,console.log("decodedValue",s)}}},watch:{$route:function(e,t){"sign-in"===t.name&&this.receiveCurrentUserData()}},components:{LeftSideNav:w}},_=x,I=(s("034f"),Object(k["a"])(_,c,l,!1,null,null,null)),U=I.exports,D=s("8c4f"),A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-container",{staticStyle:{"padding-top":"50px"},attrs:{fluid:"",justify:"center"}},[s("v-row",{attrs:{justify:"center"}},[s("h1",{staticClass:"title"},[e._v("Dashboard")])])],1)],1)},S=[],O={name:"dashboard",data:function(){return{user:null,apiData:null}},components:{}},z=O,C=(s("4424"),Object(k["a"])(z,A,S,!1,null,"3aa1e664",null)),E=C.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticStyle:{"padding-top":"90px"},attrs:{fluid:"",justify:"center"}},[s("v-card",[s("v-tabs",{attrs:{vertical:""}},[s("v-tab",[s("v-icon",{attrs:{left:""}},[e._v("mdi-account-group")]),e._v(" Users ")],1),s("v-tab",[s("v-icon",{attrs:{left:""}},[e._v("mdi-chart-bar")]),e._v(" Statistics ")],1),s("v-tab-item",[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.usersData,"items-per-page":5,"item-key":"id"},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:"",dark:""}},[s("v-toolbar-title",[e._v("All Users")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[s("v-btn",e._g({staticClass:"mx-2",attrs:{fab:"",light:"",small:"",color:"white"}},r),[s("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.popupTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"name",attrs:{rules:e.fieldsValidation.name,label:"User name",required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"email",attrs:{rules:e.fieldsValidation.email,label:"User email",required:""},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e.editedIndex<=-1?s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"email",attrs:{rules:e.fieldsValidation.password,label:"User password",required:""},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1):e._e(),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-select",{ref:"role",attrs:{items:e.roles,label:"Select role",rules:e.fieldsValidation.role},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveUser}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[s("v-btn",{staticClass:"mx-2",attrs:{fab:"",light:"",small:"",color:"white"},on:{click:function(t){return e.editUser(r)}}},[s("v-icon",{attrs:{dark:""}},[e._v("mdi-pencil")])],1),s("v-btn",{staticClass:"mx-2",attrs:{fab:"",light:"",small:"",color:"white"},on:{click:function(t){return e.deleteUser(r)}}},[s("v-icon",{attrs:{dark:""}},[e._v("mdi-delete")])],1)]}}])})],1),s("v-tab-item",[s("UsersStatisticsChart",{attrs:{users:e.users}})],1)],1)],1)],1)},T=[];s("4160"),s("c975"),s("b64b"),s("159b");function P(e){return e.get("http://localhost:8080/api/v1/admin/users").then((function(e){return console.log("response",e),e.data}))}function q(e,t){return e.post("http://localhost:8080/api/v1/admin/users",t).then((function(e){return console.log("response",e),e.data}))}function R(e,t){return e.put("http://localhost:8080/api/v1/admin/users/".concat(t.id),t).then((function(e){return console.log("response",e),e.data}))}function F(e,t){return e.delete("http://localhost:8080/api/v1/admin/users/".concat(t.id),t).then((function(e){return console.log("response",e),e.data}))}var N={getAllUsers:P,createUser:q,updateUser:R,deleteUser:F},L=N,M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticStyle:{"padding-top":"90px"},attrs:{fluid:"",justify:"center"}},[s("GChart",{attrs:{type:"ColumnChart",data:e.chartData,options:e.chartOptions}})],1)},G=[],H=s("cb43"),J={name:"UsersStatistics",data:function(){return{usersData:[],chartData:[["Name","Sales","Expenses","Profit"]],chartOptions:{title:"Users statistics",subtitle:"day month, year",description:"day month, year"},dates:{year:[],month:[],monthYear:[]}}},mounted:function(){this.users&&this.users.length>0&&this.prepareUsersData()},methods:{prepareUsersData:function(){var e=this;console.log("this.chartData",this.chartData,this.users),this.users.forEach((function(t,s){t.chartData&&e.chartData.push([t.name,t.chartData.sales,t.chartData.expenses,t.chartData.profit])}))}},props:{users:Array},components:{GChart:H["GChart"]}},V=J,B=Object(k["a"])(V,M,G,!1,null,"a678d772",null),K=B.exports,Y=s("bc3a"),Q=s("c1df"),W={name:"Users",data:function(){var e=this;return{users:null,headers:[{text:"All users",align:"left",sortable:!1,value:"index"},{text:"Name",value:"name"},{text:"Role",value:"role"},{text:"Email",value:"email"},{text:"Registered",value:"registered"},{text:"Actions",value:"action",sortable:!1}],usersData:[],editedItem:{name:"",role:"",email:""},defaultItem:{name:"",role:"",email:"",registered:new Date},sendItem:{},dialog:!1,editedIndex:-1,roles:["author","admin"],adminExists:!1,fieldsValidation:{name:[function(){return!!e.editedItem.name||"This field is required"}],email:[function(){return!!e.editedItem.email||"This field is required"}],role:[function(){return!!e.editedItem.role||"This field is required"}]},errorMessages:"",formHasErrors:!1}},props:{currentUser:Object},created:function(){this.prepareDataForTable.bind(this),console.log("users",this.users),this.getAllUsers()},mounted:function(){},computed:{popupTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},methods:{prepareDataForTable:function(){var e=this;this.usersData=[],this.adminExists=!1,this.roles=["author","admin"],this.users.forEach((function(t,s){var r={};t.createdAt=Q(t.createdAt).format("l"),e.editedItem.index=s+1,r.index=s+1,r.id=t._id,r.role=t.role,r.name=t.name,r.email=t.email,r.registered=t.createdAt,e.currentUser._id!==t._id&&e.usersData.push(r)})),console.log(this.usersData)},getAllUsers:function(){var e=this;L.getAllUsers(Y).then((function(t){"empty"!=t.respType?e.users=t:console.log("empty users list")})).then((function(){e.users&&e.prepareDataForTable()}))},close:function(){this.dialog=!1,this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.resetForm()},saveUser:function(){var e=this;this.formHasErrors=!1,Object.keys(this.editedItem).forEach((function(t){e.editedItem[t]||(e.formHasErrors=!0),e.$refs[t]&&e.$refs[t].validate(!0)})),this.formHasErrors||("admin"===this.editedItem.role?this.editedItem.isAdmin=!0:this.editedItem.isAdmin=!1,this.editedIndex>-1?(Object.assign(this.usersData[this.editedIndex],this.editedItem),L.updateUser(Y,this.editedItem).then((function(t){e.users=t})).then((function(){e.getAllUsers()}))):L.createUser(Y,this.editedItem).then((function(t){e.users=t})).then((function(){e.getAllUsers()})),this.close())},editUser:function(e){console.log("item",e),this.editedIndex=this.usersData.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteUser:function(e){var t=this,s=confirm("Confirm deleting user ".concat(e.name));return console.log("item",e),s&&L.deleteUser(Y,e).then((function(){t.getAllUsers()})),s},resetForm:function(){var e=this;this.errorMessages=[],this.formHasErrors=!1,Object.keys(this.editedItem).forEach((function(t){e.$refs[t]&&e.$refs[t].reset()}))}},components:{UsersStatisticsChart:K}},X=W,Z=(s("35c8"),Object(k["a"])(X,$,T,!1,null,"b51e47e6",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticStyle:{"padding-top":"50px"},attrs:{fluid:"",justify:"center"}},[s("v-row",{attrs:{justify:"center"}},[s("h1",{staticClass:"title"},[e._v("Sign up")])]),s("v-col",{staticClass:"centered-block",attrs:{cols:"8",sm:"6",md:"4"}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{ref:"passw",attrs:{rules:e.passwRules,label:"Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",type:"button",required:""},on:{click:e.signUp}},[e._v(" Sign up ")]),s("v-btn",{attrs:{"x-small":"",color:"secondary",dark:""},on:{click:function(t){return e.goTo("/sign-in")}}},[e._v("Sign in ")])],1)],1)],1)},se=[],re=s("bc3a"),ae={name:"SignUp",data:function(){return{valid:!0,name:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",confirmPassw:"",passwRules:[function(e){return!!e||"Password is required"}],confirmPasswRules:[function(e){return!!e||"Password confirmation is required"}]}},methods:{validate:function(){this.valid=!0,this.$refs.form.validate()&&(this.snackbar=!0)},signUp:function(){var e=this;if(this.validate(),this.valid){var t={password:this.password,email:this.email,name:this.name};v.register(re,t).then((function(t){400===t.status?alert(t.data.message):(console.log("res.data",t.data),e.goTo("/sign-in",t.data))}))}else console.log("not valid !")},goTo:function(e,t){this.$router.push({path:e,query:{userData:t}})}},props:{isAuthorized:Function}},ne=ae,ie=(s("c4c4"),Object(k["a"])(ne,te,se,!1,null,"2bf428cc",null)),oe=ie.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticStyle:{"padding-top":"50px"},attrs:{fluid:"",justify:"center"}},[s("v-row",{attrs:{justify:"center"}},[s("h1",{staticClass:"title"},[e._v("Sign in")])]),s("v-col",{staticClass:"centered-block",attrs:{cols:"8",sm:"6",md:"4"}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{rules:e.passwRules,label:"Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.signIn}},[e._v(" Sign in ")]),s("v-btn",{attrs:{"x-small":"",color:"secondary",dark:""},on:{click:function(t){return e.goTo("/sign-up")}}},[e._v("Sign up ")])],1)],1)],1)},le=[],ue=s("bc3a"),de={name:"SignIn",data:function(){return{auth:!1,valid:!0,email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwRules:[function(e){return!!e||"Password is required"}]}},mounted:function(){var e=this;this.checkAuth(),setTimeout((function(){e.checkParams()}),600)},methods:{checkAuth:function(){this.isAuthorized()&&this.$router.push("/")},signIn:function(e,t,s){var r=this;if(s?this.valid=!0:this.validate(),this.valid){var a=t||{email:this.email,password:this.password};v.signIn(ue,a).then((function(e){e&&400===e.status?alert(e.data.message):r.checkAuth()}))}},goTo:function(e){this.$router.push(e)},validate:function(){this.valid=!0,this.$refs.form.validate()&&(this.snackbar=!0)},checkParams:function(){if(this.$route&&this.$route.query.userData){var e={email:this.$route.query.userData.email,password:this.$route.query.userData.password};this.signIn(this.event,e,!0)}}},props:{isAuthorized:Function}},fe=de,me=(s("76c3"),Object(k["a"])(fe,ce,le,!1,null,"66c801b2",null)),he=me.exports,pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticStyle:{"padding-top":"90px"},attrs:{fluid:"",justify:"center"}},[s("v-row",{attrs:{justify:"center"}},[s("h1",{staticClass:"title"},[e._v("Users transfer")])]),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"1",sm:"6",md:"4",justify:"center"}},[s("h3",{staticClass:"title"},[e._v("Import data")]),s("v-file-input",{ref:"file",attrs:{name:"files[]",enctype:"multipart/form-data",accept:".csv",label:"File input"},on:{change:e.handleFile}}),s("v-btn",{attrs:{small:""},on:{click:function(t){return e.importData()}}},[e._v("Upload")])],1),s("v-col",{attrs:{cols:"1",sm:"6",md:"2",justify:"center"}},[s("h3",{staticClass:"title"},[e._v("Export data")]),s("v-btn",{attrs:{large:""},on:{click:function(t){return e.exportData()}}},[e._v("Generate csv file")]),s("br"),e.fileLink?s("a",{attrs:{target:"_blank",href:e.fileLink}},[e._v("Download csv file")]):e._e()],1)],1),s("v-row",{ref:"preview"})],1)},ve=[],be=(s("9911"),s("bc3a"));function ge(e){return be.post("http://localhost:8080/api/v1/admin/users/import-csv",{data:e}).then((function(e){return console.log("response",e),e.data})).catch((function(e){return console.log("error",e.response),e.response?{error:e.response.data.message,status:e.response.status}:e}))}function je(){return be.get("http://localhost:8080/api/v1/admin/users/export-csv").then((function(e){return console.log("response",e),{status:e.status,link:e.data.link}})).catch((function(e){return console.log("error",e.response),e.response?{error:e.response.data.message,status:e.response.status}:e}))}var ke={importCsv:ge,exportCsv:je},ye=ke,we={name:"DbUsersTransfer",data:function(){return{file:null,fileData:"",exportedFile:null,parsedCsv:[],fileLink:null}},mounted:function(){},methods:{csvJSON:function(e){for(var t=e.split("\n"),s=[],r=t[0].split(","),a=1;a<t.length;a++){for(var n={},i=t[a].split(","),o=0;o<r.length;o++)n[r[o]]=i[o];s.push(n)}return JSON.stringify(s)},handleFile:function(e){if(e){var t=this,s=new FileReader;s.readAsText(e),s.onload=function(e){var r=e.target.result;t.fileData=t.csvJSON(r),s.onerror=function(e){e.target.error&&alert("Error reading the file")}}}},importData:function(){if(!this.fileData)return alert("File must be attached");ye.importCsv(this.fileData).then((function(e){console.log("response",e),e.error&&alert(e.error),500===e.status&&alert("Server error")}))},exportData:function(){var e=this;this.exportedFile=ye.exportCsv().then((function(t){console.log("response",t),200===t.status&&(alert("File was generated"),setTimeout((function(){window.open(t.link),e.fileLink=t.link}),1e3)),t.error&&alert(t.error)}))}}},xe=we,_e=(s("37f2"),Object(k["a"])(xe,pe,ve,!1,null,"151192fe",null)),Ie=_e.exports;function Ue(){var e=[{path:"/",name:"dashboard",component:E},{path:"/users",name:"users",component:ee},{path:"/sign-up",name:"sign-up",component:oe},{path:"/sign-in",name:"sign-in",component:he},{path:"/data-transfer",name:"users-transfer",component:Ie}],t=new D["a"]({mode:"hash",base:"/",routes:e});return t}n["default"].use(D["a"]),n["default"].use(o.a),s("953f");var De={},Ae=new o.a(De);function Se(){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,r,a,i,o,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},s=t.beforeApp,r=void 0===s?function(){}:s,a=t.afterApp,i=void 0===a?function(){}:a,o=Ue(),e.next=4,r({router:o,vuetify:Ae});case 4:return o.afterEach((function(e){return!!e.name})),c=new n["default"]({router:o,vuetify:Ae,render:function(e){return e(U)}}),l={app:c,router:o},e.next=9,i(l);case 9:return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}n["default"].config.productionTip=!1,Se({beforeApp:function(e){var t=e.router;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])({router:t});case 2:case"end":return e.stop()}}),e)})))()},afterApp:function(e){var t=e.app,s=e.router;s.onReady((function(){t.$mount("#app")}))}})},c4c4:function(e,t,s){"use strict";var r=s("ffed"),a=s.n(r);a.a},e067:function(e,t,s){},ffed:function(e,t,s){}});